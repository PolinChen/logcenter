
## 什麼是日誌文件(log file)


> 在電腦系統中，依據特定的系統事件的自動生成和時間戳的文檔即成為日誌。幾乎所有的軟件應用程序和系統都會產生日誌文件。

日誌文件是去進出特定服務器的所有的記錄。它很像飛機的黑匣子，記錄一切順利上了飛機中的問題的情況下的概念。依據不同的定義，日誌文件會被保存在不同的文件夾中。

日誌文件的重要一點是要跟踪的是與服務器發生的事情。在一個複雜的系統中，如果沒有日誌文件， 當問題發生後， 便很難找到問題。通常利用日誌文件來辨認問題，追蹤異常的軌跡，以便明確問題發生原因和快速修復異常和問題。
日誌的一些常見的例子：

* Web服務器中的訪問日誌，列出從網站請求的各個文件。這些文件將包括HTML文件及其嵌入的圖形圖像和需要發送的任何其他相關文件。從web服務器的日誌文件中，管理員可以識別訪問者的數量，從他們所訪問的domian，和每一個頁面在如一天，一周，一個月或一年的的訪問量和訪問方式。

* 在Microsoft Exchange，交易日誌記錄對Exchange數據庫所做的所有更改。這些日誌信息在寫入Mailbox database 前首先會首先寫入到Exchange事務日誌問中。之後，事務日誌的內容被寫入到Exchange Server數據庫。

* 審計日誌（也稱為一個審核跟踪）記錄了可能影響一個特定的操作或事件的任何活動的時間順序的文檔。詳細信息通常包括被訪問的資源，目的地址和源地址，對於誰訪問資源的人時間戳和用戶登錄信息。

### LOG = timestamp + Data

![logsample](https://github.com/PolinChen/logcenter/blob/master/img/logsample1.png)





## 日誌管理

今天，大多數企業比以往更嚴格的預算和更少的資源，但他們正在經歷不斷增加的壓力，提高安全性，遵守法規，以不斷提高可用性。

政府和行業法規在最近幾年變得更嚴謹的規範，針對沒有遵守高級管理人員，可能面對的罰款、甚至監禁。隨著減少員工，IT組織現在被迫投入資源對合規性的舉措，同時也繼續保證安全性和滿足服務水平協議。

在過去，系統管理員或網路分析師，只會從一些特定的系統收集日誌數據中， 進行特定的搜索數據中的事件.如今，日誌管理是一個組織的要求，要求全面的功能，超越了數據收集涵蓋正常化，分析，報告和災難的證明依據。

龐大的系統基礎設備，產生海量負載的日誌數據，已經成為IT 部門的巨大的挑戰。

## 日誌管理挑戰
當法規要求不僅要求你收集所有日誌，而且他們審查定期，可搜索，並保存在原來的，不變的，原始形式的格式，具體時間框架。

日誌也可以在識別安全事故，違規行為，欺詐行為非常有用，操作上的問題，他們出現後不久。在執行審計時，他們也有價值分析，內部調查，建立基準線，並確定運營趨勢和長期
問題。然而，無限各種日誌數據格式使得不可能利用數據而不數據標準化。


日誌管理工作的具體挑戰，主要來自數量龐大處理困難、過於分散集中不易、格式複雜分析不易。這些挑戰分為三個方面：收集，分析，和存儲歸檔。

## 日誌採集

* 日誌數據是多種多樣的：不僅系統、應用程序、網絡設備有其自己的日誌與其中不同的捕獲特定數據的類型，而且單個日誌源可以有多個日誌文件。例如，應用程序通常具有多個日誌文件，每個文件包含特定類型數據的。
* 日誌數據源分散：日誌文件源可能位於企業內的基礎設施、數據中心並、主機託管服務提供商、或是在雲端中。這種基礎結構可單獨地或以混合環境中進行管理。日誌集合必須跨越所有這些環境。
* 日誌數據源不斷變化：在任何時候一個新的系統，應用程序或網絡設備開始上線是使用，並會開始產生新的日誌數據。雲端主機可能推出數天或數小時，然後終止。日誌管理解決方案必須考慮到這些變化，否則100％的日誌收集將是不可能的。
* 日誌數據可能包含敏感信息，如從電子郵件中摘錄的用戶名和密碼。需要提供適當的日誌數據的安全性，以保證日誌的安全和隱私。


## Log分析能力

* 當日誌文件太難以讀取或使感倍，它是那麼該日誌文件分析是必要的。日誌文件分析通常由某種計算機程序，使日誌文件的信息更簡潔，易讀的格式進行。日誌文件也可以用於關聯服務器之間的數據，並發現可能需要一個主要解決方案來修復它們所有的不同系統之間的共同問題。

* 日誌，數據使用你的日誌提取有關您的系統行為的關鍵指標或趨勢的概念。日誌可以是一個豐富的數據源，只要你能在日誌格式的工作，可以從你的日誌事件中提取的關鍵指標進​​行分析功能。許多傳統的解決方案記錄都集中於能夠簡單地索引和搜索日誌。同時能夠有效地搜索你的日誌是故障排除和取證尤其重要的是，能夠分析功能應用到關鍵指標在日誌文件（如平均值，最大值，最小值，GroupBys ...）你的日誌數據開闢了一個更更豐富的用例。

* 一些日誌使用標準格式，而其他人使用專有格式。有些日誌格式是逗號分開的，有些是空格分隔，還有一些使用符號或其他之間的字符定界符，單個日誌消息中的字段。

* 每個日誌條目，或消息，包含某些確定的信息片，例如一個主機IP地址或用戶名。每個日誌源記錄的，它認為重要的信息片段;因此，它可以是非常困難的，因為它們可以或可以不包含共同連結不同的日誌來源值。

* 經常處理這種複雜日誌的方法是，使用Perl/grep/awk/sed/cut/less/tail/vi/regular expression 等腳本，來搜索和生產只有那些日誌信息匹配查詢。在概念上，這是一種合理的方法，但與日益增長的複雜性和多種來源，其對緩解人工日誌審查的問題的能力是有限的。


## 日誌集中和歸檔

日誌數據必須像任何其他組織的數據顯示，受安全和保留策略，以及合規要求處理。當日誌文件包含敏感數據（如客戶數據），日誌產生的漏洞是一個嚴重的問題。所以日誌在傳遞過程和存儲過程時，安全保護也是一個重要的課題。

另外，從分散在整個組織的log到集中存儲的日誌，需要一個龐大的存儲管理機制，包含成本、管理、備份和災難恢復計劃也是必須考慮的因素。




參考資料：

[log file1](http://http://whatis.techtarget.com/definition/log-log-file)

[log file2](http://http://www.brickmarketing.com/define-log-file.htm)

[Log Management Best Practices](https://www.alertlogic.com/assets/log-manager/Log-Management-Best-Practices.pdf)－ pdf: The Benefits of Automated Log Management

[Advances and Challenges in Log Analysis](http://queue.acm.org/detail.cfm?id=2082137) ＊ 

[Top 4 Log Management Challenges](https://blog.logentries.com/2015/01/infographic-top-4-log-management-challenges/) - Infographic: 

[ 9th log management survey (2014). ](https://www.sans.org/reading-room/whitepapers/analyst/ninth-log-management-survey-report-35497) Log Collection Practices and Challenges

[Challenges in Log Management ](https://blog.compass-security.com/2014/10/challenges-in-log-management/)
